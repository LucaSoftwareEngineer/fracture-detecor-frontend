<app-navbar></app-navbar>
<app-sidebar></app-sidebar>

<div class="p-4 sm:ml-64">
  <div class="md:mt-[50px] mt-[60px]">
    <div class="w-[100%] bg-white border border-gray-200 rounded-lg shadow-sm">
      <div class="bg-[#411E62] p-3 rounded-t-lg">
        <a class="cursor-pointer">
          <h5 class="mb-2 text-2xl font-bold tracking-tight text-white">
            Storico analisi
          </h5>
        </a>
      </div>
      <div class="p-5">
        <p class="mb-3 font-normal text-gray-700">
          In questo servizio hai la possibilità di visionare uno storico di tutte le tue analisi ed in conformità con il GDPR rimuovere i tuoi file definitivamente attraverso l'ausilio del pulsante "Elimina".
        </p>
        <div>

          <form>
            <input
              type="text"
              class="md:w-[30%] w-[100%] bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#411E62] focus:border-[#411E62] block w-full p-2.5"
              placeholder="Cerca nel tuo archivio..." />
          </form>

          <div class="relative overflow-x-auto shadow-md sm:rounded-lg mt-[20px]">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
              <tr>
                <th scope="col" class="px-6 py-3">
                  Data analisi della lastra
                </th>
                <th scope="col" class="px-6 py-3">
                  File lastra
                </th>
                <th scope="col" class="px-6 py-3">
                  Esito dell'analisi
                </th>
                <th scope="col" class="px-6 py-3">
                  Opzioni
                </th>
              </tr>
              </thead>
              <tbody>
              @if (elencoAnalisi.length == 0) {
                <tr>
                  <td colspan="4" class="p-5"><i>Non hai ancora effettuato nessuna analisi...</i></td>
                </tr>
              } @else {
                <tr *ngFor="let analisi of elencoAnalisi" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                <td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                  {{analisi.dataAnalisi.replace('T00:01:00','')}}
                </td>
                <td class="px-6 py-4">
                  <img class="w-[100px] h-[100px]" src="{{api.CLOUD_LASTRE + analisi.nomeFileLastra}}" />
                </td>
                <td class="px-6 py-4">
                  @if (analisi.esito) {
                    <b class="text-red-800">Attenzione! è presente una frattura</b>
                  } @else {
                    <b class="text-green-800">Ottimo! Nessun danno rilevato</b>
                  }
                </td>
                <td class="px-6 py-4">
                  <button type="button" (click)="eliminaAnalisi(analisi.idAnalisiFrattura)" class="cursor-pointer focus:outline-none text-white bg-red-800 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                    <img class="w-[20px] h-[20px]" src="assets/icons8-cestino-48.png" alt="cestino" />
                  </button>
                </td>
              </tr>
              }
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="4" class="text-right p-[10px]">
                    <nav aria-label="Page navigation example">
                      <ul class="inline-flex -space-x-px text-sm">
                        <li>
                          <a class="cursor-pointer flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Indietro</a>
                        </li>
                        <li>
                          <a class="cursor-pointer flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</a>
                        </li>
                        <li>
                          <a class="cursor-pointer flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Avanti</a>
                        </li>
                      </ul>
                    </nav>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
